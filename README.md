# DenizenReflect
---

### 1. Глобальные импорты (`imports`)

Для удобства и чистоты кода DenizenReflect вводит систему импортов.
Блок `imports` объявляется один раз на верхнем уровне `.dsc`‑файла и действует на все скрипты внутри этого файла.

```yaml
# Располагается на верхнем уровне файла
imports:
  - полный.путь.к.Классу1
  - полный.путь.к.вложенному$Классу2
```

Плагин автоматически определяет короткое имя класса (например, `org.bukkit.Color` → `Color`) и позволяет использовать его во всех тегах и командах DenizenReflect внутри файла.

---

### 2. Теги (`Tags`)

Теги используются для получения данных: создания объектов, доступа к полям и вызова методов, возвращающих значение.

| **Тег**           | **Описание**                                     | **Синтаксис и пример**                                                                                                                |
| ----------------- | ------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------- |
| Создание объекта  | Создает новый экземпляр класса (аналог `new`).   | `<reflect_new[<Класс>].with[<аргументы>]>`<br>`- define playerlist <reflect_new[ArrayList].with[]>`                                   |
| Вызов метода      | Вызывает метод у объекта и возвращает результат. | `<[объект].reflect_call[<метод>].with[<аргументы>]>`<br>`- define name <player.reflect_call[getName].with[]>`                         |
| Получение поля    | Получает значение публичного поля объекта.       | `<[объект].reflect_get[<поле>]>`<br>`- define level <player.location.reflect_get[y]>`                                                 |
| Статический метод | Вызывает статический метод класса.               | `<reflect_static_call[<Класс>.<метод>].with[<аргументы>]>`<br>`- define online <Bukkit.reflect_static_call[getOnlinePlayers].with[]>` |
| Статическое поле  | Получает значение статического поля класса.      | `<reflect_static_get[<Класс>.<поле>]>`<br>`- define RED <reflect_static_get[Color.RED]>`                                              |
| Получение типа    | Возвращает класс (тип) объекта.                  | `<[объект].reflect_type>`<br>`- narrate "Тип объекта: <[my_list].reflect_type>"`                                                      |
| Приведение типа   | Приводит объект к другому Java‑типу.             | `<reflect_cast[<Тип>].from[<объект>]>`<br>`- define entity <reflect_cast[LivingEntity].from[<context.entity>]>`                       |
| `null`            | Представляет `null` значение в Java.             | `<reflect_null>`<br>`- if <[my_object]> == <reflect_null>`                                                                            |

---

### 3. Объекты

DenizenReflect не вводит новых объектных типов (`dObject`). Вместо этого он работает с определениями, которые содержат «сырые» Java‑объекты.
Вы можете сохранить любой Java‑объект в definition и передавать его между тегами и командами. Тип такого объекта можно проверить с помощью тега `<[объект].reflect_type>`.

---

### 4. Команды (`Commands`)

Команды используются для выполнения действий: изменения полей и вызова методов, которые ничего не возвращают (`void`).

| **Команда**           | **Описание**                                    | **Синтаксис и пример**                                                                                                                   |
| --------------------- | ----------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| Вызов метода          | Вызывает метод у объекта, игнорируя результат.  | `reflect_invoke [объект].method:<метод> (with:<аргументы>)`<br>`- reflect_invoke <[my_list]>.method:add with:HelloWorld`                 |
| Установка поля        | Устанавливает значение публичного поля объекта. | `reflect_set [объект].field:<поле> value:<значение>`<br>`- reflect_set <player>.field:allowFlight value:true`                            |
| Статический вызов     | Вызывает статический метод класса.              | `reflect_static_invoke <Класс>.method:<метод> (with:<аргументы>)`<br>`- reflect_static_invoke Bukkit.method:broadcastMessage with:"Hi!"` |
| Статическая установка | Устанавливает значение статического поля.       | `reflect_static_set <Класс>.field:<поле> value:<значение>`<br>`(используется редко)`                                                     |

---
